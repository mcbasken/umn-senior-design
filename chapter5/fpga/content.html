<h1>Chapter 5: FPGA Development Flow and Embedded Applications</h1>

<h2>FPGA Design Flow Overview</h2>

<p>The FPGA design process involves a series of key steps that translate a hardware design (often written in Verilog) into a working configuration on a physical chip. Each phase is supported by Electronic Design Automation (EDA) tools and follows a logical progression:</p>

<ol>
  <li><strong>Design Entry</strong>: Write your hardware description using Verilog or VHDL.</li>
  <li><strong>Synthesis</strong>: Convert HDL into a netlist of logic gates.</li>
  <li><strong>Implementation</strong>:
    <ul>
      <li><strong>Placement</strong>: Assign logic elements to physical locations on the chip.</li>
      <li><strong>Routing</strong>: Connect these elements using the FPGA's interconnect fabric.</li>
    </ul>
  </li>
  <li><strong>Bitstream Generation</strong>: Create a binary file used to program the FPGA.</li>
  <li><strong>Programming</strong>: Load the bitstream into the FPGA via JTAG or configuration memory.</li>
</ol>

<h3>Example: Simple AND Gate in Verilog</h3>

<pre><code>```verilog
module and_gate (
    input a,
    input b,
    output y
);
    assign y = a & b;
endmodule
```
</code></pre>

<p>This Verilog module can be synthesized and mapped to physical LUTs (Look-Up Tables) in the FPGA fabric.</p>

<hr>

<h2>Embedded Processors in FPGAs</h2>

<p>Many modern FPGAs include support for embedded processors. These can be:</p>

<ul>
  <li><strong>Hard-core processors</strong> (e.g., ARM Cortex-A9 in Xilinx Zynq)</li>
  <li><strong>Soft-core processors</strong> (e.g., MicroBlaze, Nios II, RISC-V) instantiated in logic fabric</li>
</ul>

<p>These processors enable hybrid designs where software interacts with custom logic blocks for flexibility and performance.</p>

<h3>Key Concepts</h3>
<ul>
  <li><strong>Memory-mapped I/O</strong>: Peripherals are accessed like memory locations.</li>
  <li><strong>On-chip memory</strong>: Block RAMs are used for stack/data storage.</li>
  <li><strong>Real-time constraints</strong>: Tasks must be predictable and time-bounded.</li>
</ul>

<hr>

<h2>I/O and Communication Interfaces</h2>

<p>FPGAs often need to interface with external components using standard protocols:</p>

<ul>
  <li><strong>UART</strong>: Simple serial communication</li>
  <li><strong>SPI</strong>: Synchronous serial interface, often for sensors or memory</li>
  <li><strong>I2C</strong>: Multi-device communication using two wires</li>
  <li><strong>Parallel Interfaces</strong>: Used for displays or high-speed buses</li>
  <li><strong>External Memory Interfaces</strong>: SRAM, DRAM, and Flash modules</li>
</ul>

<h3>Example: UART Transmitter (Simplified)</h3>

<pre><code>```verilog
module uart_tx (
    input clk,
    input tx_start,
    input [7:0] tx_data,
    output reg tx,
    output reg tx_busy
);
// Simplified state machine and logic would go here
endmodule
```
</code></pre>

<h2>âœ… Quiz: FPGA and Embedded Systems</h2>

<div class="quiz">
  <p><strong>1. What is the purpose of the synthesis step in FPGA design?</strong></p>
  <ul>
    <li>A) Generate waveforms</li>
    <li>B) Map HDL to logic gates</li>
    <li>C) Run simulation</li>
    <li>D) Configure I/O pins</li>
  </ul>
  <details>
    <summary>Show Answer</summary>
    <p><strong>Correct answer: B) Map HDL to logic gates</strong></p>
    <p>
      Explanation: Synthesis converts your Verilog or VHDL into a gate-level netlist, mapping your design into FPGA logic blocks.
    </p>
  </details>

  <p><strong>2. Which of the following is a soft-core processor?</strong></p>
  <ul>
    <li>A) ARM Cortex-A9</li>
    <li>B) RISC-V (custom core)</li>
    <li>C) Intel Xeon</li>
    <li>D) AMD Ryzen</li>
  </ul>
  <details>
    <summary>Show Answer</summary>
    <p><strong>Correct answer: B) RISC-V (custom core)</strong></p>
    <p>
      Explanation: A soft-core processor like a custom RISC-V core can be synthesized into the programmable fabric of an FPGA, unlike hard processors which are fixed silicon.
    </p>
  </details>

  <p><strong>3. What type of communication is UART?</strong></p>
  <ul>
    <li>A) Parallel</li>
    <li>B) Wireless</li>
    <li>C) Serial</li>
    <li>D) Optical</li>
  </ul>
  <details>
    <summary>Show Answer</summary>
    <p><strong>Correct answer: C) Serial</strong></p>
    <p>
      Explanation: UART stands for Universal Asynchronous Receiver/Transmitter and communicates data serially, one bit at a time.
    </p>
  </details>

  <p><strong>4. Which tool generates the .bit or .bin file to load into an FPGA?</strong></p>
  <ul>
    <li>A) Compiler</li>
    <li>B) Simulator</li>
    <li>C) Bitstream generator</li>
    <li>D) Verilog linter</li>
  </ul>
  <details>
    <summary>Show Answer</summary>
    <p><strong>Correct answer: C) Bitstream generator</strong></p>
    <p>
      Explanation: The bitstream generator creates the configuration file used to program the FPGA with your synthesized and placed logic.
    </p>
  </details>

  <p><strong>5. Which memory type is typically used for external RAM in FPGAs?</strong></p>
  <ul>
    <li>A) ROM</li>
    <li>B) SRAM or DRAM</li>
    <li>C) PROM</li>
    <li>D) EEPROM</li>
  </ul>
  <details>
    <summary>Show Answer</summary>
    <p><strong>Correct answer: B) SRAM or DRAM</strong></p>
    <p>
      Explanation: FPGAs often interface with external SRAM or DRAM for temporary data storage due to their speed and flexibility.
    </p>
  </details>
</div>

<hr>

<h2>ðŸ§ª MicroSim Prompt</h2>

<h3>ðŸŽ¯ Simulation Prompt: UART Transmit Controller</h3>

<p><strong>Design a UART transmitter module in Verilog</strong> that supports the following:</p>
<ul>
  <li>1 start bit, 8 data bits, 1 stop bit (8N1 format)</li>
  <li>Configurable baud rate via clock divider</li>
  <li><code>tx_start</code> signal triggers transmission</li>
  <li>Output <code>tx</code> signal to line</li>
  <li><code>tx_busy</code> signal shows when transmitting</li>
</ul>

<h4>Simulation Requirements:</h4>
<ul>
  <li>Generate a 50 MHz clock in your testbench</li>
  <li>Send two bytes: <code>0x55</code> and <code>0xA3</code></li>
  <li>Use <code>$display</code> to monitor <code>tx</code> and <code>tx_busy</code></li>
</ul>

<p>ðŸ“Œ <strong>Learning Outcome:</strong> Learn how serial protocols are implemented in hardware and verify behavior using simulation.</p>

